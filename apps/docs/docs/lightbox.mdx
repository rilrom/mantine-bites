import { InstallScript } from '../components/InstallScript/InstallScript';
import * as demos from '../demos/lightbox';

## Important

This plugin is in beta and is subject to BREAKING CHANGES. It is not yet recommended to use this in a production environment.

## Installation

<InstallScript packages="embla-carousel@^8.5.2 embla-carousel-react@^8.5.2 @mantine/carousel @mantine-bites/lightbox" />

After installation import package styles at the root of your application:

```tsx
import '@mantine/core/styles.css';
// ‼️ import carousel and lightbox styles after core package styles
import '@mantine/carousel/styles.css';
import '@mantine-bites/lightbox/styles.css';
```

## Do not forget to import styles

You've followed the installation instructions above but it is still not working?

- Lightbox isn't appearing.
- Carousel slides are rendered vertically
- No controls or indicators

You've fallen into the trap of not importing the lightbox and carousel styles! To fix the issue, import the lightbox and carousel styles at the root of your application:

```tsx
import '@mantine/carousel/styles.css';
import '@mantine-bites/lightbox/styles.css';
```

## Usage

`Lightbox` is a full-screen modal-based image viewer built on top of `@mantine/carousel` and `@mantine/modal`. It uses a compound component pattern — slides are declared as `Lightbox.Slide` children. Each slide can have an optional `thumbnail` prop that renders in the thumbnail strip. Use `carouselOptions={{ initialSlide }}` to control which slide is displayed when the lightbox opens — click any image in the grid below to see it in action.

<Demo data={demos.usage} />

## Carousel options

`Lightbox` renders a [Carousel](https://mantine.dev/x/carousel/) component under the hood. You can pass any `Carousel` props via the `carouselOptions` prop — this includes `withControls`, `initialSlide`, `onSlideChange`, `controlSize`, `controlsOffset`, `emblaOptions`, and more.

<Demo data={demos.carouselOptions} />

## Embla options

Embla options are passed through `carouselOptions.emblaOptions`. These control the core carousel behavior such as `loop`, `dragFree`, `align`, and more. See the [Embla Carousel options documentation](https://www.embla-carousel.com/api/options/) for the full list.

## Loop

By default, navigation stops at the first and last slide. To enable infinite looping, pass `emblaOptions: { loop: true }` via `carouselOptions`:

<Demo data={demos.loop} />

## Embla plugins

`Lightbox` supports [Embla Carousel plugins](https://www.embla-carousel.com/plugins/) via `carouselOptions.plugins`. The example below uses the `embla-carousel-autoplay` plugin to automatically advance slides:

<Demo data={demos.emblaPlugins} />

## Modal options

`Lightbox` renders a [Modal](https://mantine.dev/core/modal/) component under the hood. You can pass any `Modal` props via the `modalOptions` prop to customize the overlay, transitions, and more. The `opened`, `onClose`, `fullScreen`, `title`, and `withCloseButton` props are managed internally and cannot be overridden.

<Demo data={demos.modalOptions} />

## Hide controls

Strip the lightbox down to its essentials by hiding controls, thumbnails, and the counter. Pass `withControls: false` via `carouselOptions` and set `withThumbnails={false}` and `withCounter={false}` on the `Lightbox` component. Users can still navigate with arrow keys and swipe gestures.

<Demo data={demos.hideControls} />

## Placeholder thumbnails

When a `Lightbox.Slide` does not have a `thumbnail` prop, a placeholder icon is rendered in the thumbnail strip. This is useful for slides that contain non-image content.

<Demo data={demos.placeholderThumbnails} />

## Custom counter format

Use the `counterFormatter` prop to customize how the slide counter is displayed. The function receives the current zero-based index and total slide count.

<Demo data={demos.customCounter} />

## Keyboard navigation

The lightbox supports keyboard navigation out of the box:

- **Left arrow** — previous slide
- **Right arrow** — next slide
- **Escape** — close lightbox

## Accessibility

- Close button includes `aria-label="Close lightbox"`
- Fullscreen toggle includes `aria-label="Enter/exit fullscreen mode"`
- Navigation controls include appropriate `aria-label` attributes (configurable via `carouselOptions.previousControlProps` and `carouselOptions.nextControlProps`)
- Thumbnail buttons include `aria-label="Go to slide N"` and `aria-current="true"` on the active thumbnail
